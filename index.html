<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AppsFlyer Attribution & SKAN Simulator</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; }
        header { text-align: center; color: white; margin-bottom: 30px; }
        header h1 { font-size: 2.5em; margin-bottom: 10px; }
        header p { font-size: 1em; opacity: 0.95; }
        .nav-tabs { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .nav-tab { background: white; border: none; padding: 12px 24px; border-radius: 10px 10px 0 0; cursor: pointer; font-size: 15px; font-weight: 600; color: #667eea; transition: all 0.3s ease; }
        .nav-tab:hover { background: #f0f0f0; }
        .nav-tab.active { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4); }
        .content-panel { background: white; border-radius: 0 10px 10px 10px; padding: 30px; min-height: 600px; max-height: 90vh; overflow-y: auto; box-shadow: 0 10px 40px rgba(0,0,0,0.15); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .setup-section, .media-section { background: #f9f9f9; border-radius: 12px; padding: 25px; margin-bottom: 25px; }
        h2 { color: #667eea; margin-bottom: 15px; font-size: 1.15em; }
        h3 { color: #667eea; margin-top: 20px; margin-bottom: 15px; }
        h4 { color: #667eea; margin-top: 15px; margin-bottom: 10px; }
        .control-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .control-group { display: flex; flex-direction: column; gap: 8px; }
        .control-group label { font-weight: 600; color: #333; font-size: 0.95em; }
        .radio-group { display: flex; flex-direction: column; gap: 8px; border: 2px solid #d0d0d0; border-radius: 6px; padding: 8px; }
        .radio-item { display: flex; align-items: center; gap: 8px; padding: 6px; cursor: pointer; }
        .radio-item input { cursor: pointer; width: 16px; height: 16px; }
        .radio-item label { margin: 0; cursor: pointer; font-weight: 500; flex: 1; font-size: 0.9em; }
        .info-box { background: #e7f3ff; border-left: 4px solid #2196F3; padding: 12px; border-radius: 4px; margin-bottom: 15px; color: #0c5460; font-size: 0.85em; }
        .partner-list { display: flex; flex-direction: column; gap: 15px; margin-bottom: 15px; }
        .partner-card { border: 2px solid #e0e0e0; border-radius: 8px; padding: 15px; background: white; }
        .partner-row { display: grid; grid-template-columns: 1.2fr 0.8fr 0.8fr 0.8fr 0.8fr 70px; gap: 10px; align-items: flex-end; }
        .field-group { display: flex; flex-direction: column; gap: 4px; }
        .field-group label { font-weight: 600; color: #666; font-size: 0.8em; }
        select, input { padding: 8px; border: 1px solid #d0d0d0; border-radius: 4px; font-size: 0.85em; width: 100%; }
        select:focus, input:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1); }
        .remove-btn { padding: 8px 12px; background: #ff6b6b; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.75em; width: 100%; }
        .remove-btn:hover { background: #ff5252; }
        .action-buttons { display: flex; gap: 10px; }
        .btn { padding: 12px 20px; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; font-size: 0.95em; transition: all 0.2s ease; }
        .btn-primary { background: #667eea; color: white; flex: 1; }
        .btn-primary:hover { background: #5568d3; }
        .btn-secondary { background: #f0f0f0; color: #333; flex: 1; }
        .btn-secondary:hover { background: #e0e0e0; }
        .btn-add { background: #28a745; color: white; width: 100%; margin-top: 10px; }
        .btn-add:hover { background: #20c997; }
        .window-visual { background: linear-gradient(135deg, #f0f7ff 0%, #e8f4f8 100%); border: 2px solid #667eea; border-radius: 12px; padding: 30px; margin: 20px 0; position: relative; overflow: hidden; }
        .bubble-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; border-radius: 10px; overflow: hidden; }
        .bubble { position: absolute; border-radius: 50%; opacity: 0; box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
        .bubble.size-sm { width: 8px; height: 8px; }
        .bubble.size-md { width: 12px; height: 12px; }
        .bubble.size-lg { width: 16px; height: 16px; }
        .bubble.blue { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .bubble.green { background: linear-gradient(135deg, #28a745 0%, #20c997 100%); }
        .bubble.purple { background: linear-gradient(135deg, #764ba2 0%, #667eea 100%); }
        .bubble.pink { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .bubble.cyan { background: linear-gradient(135deg, #00bcd4 0%, #0097a7 100%); }
        @keyframes float-up { 0% { transform: translateY(0) translateX(0) scale(1); opacity: 0; } 5% { opacity: 0.8; } 95% { opacity: 0.8; } 100% { transform: translateY(-350px) translateX(var(--tx, 0)) scale(0.3); opacity: 0; } }
        .timeline-bar { background: linear-gradient(90deg, #d4edda 0%, #fff 50%, #d1ecf1 100%); border-radius: 8px; height: 80px; display: flex; align-items: center; justify-content: space-between; padding: 0 20px; margin-bottom: 20px; border: 3px solid #667eea; position: relative; z-index: 2; }
        .event-flow { display: flex; align-items: center; gap: 12px; padding: 15px; background: white; border-radius: 8px; margin-bottom: 12px; border-left: 4px solid #667eea; animation: slideIn 0.6s ease-out; position: relative; z-index: 2; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-30px); } to { opacity: 1; transform: translateX(0); } }
        .event-icon { font-size: 2em; min-width: 50px; display: flex; align-items: center; justify-content: center; }
        .icon-click { animation: clickAnimation 1.5s infinite; }
        .icon-view { animation: viewAnimation 1.5s infinite; }
        @keyframes clickAnimation { 0%, 100% { transform: scale(1) rotate(0deg); } 50% { transform: scale(1.15) rotate(10deg); } }
        @keyframes viewAnimation { 0%, 100% { transform: scale(1) translateY(0); } 50% { transform: scale(1.15) translateY(-5px); } }
        .winner-box { background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%); border: 3px solid #28a745; border-radius: 12px; padding: 30px; text-align: center; }
        .winner-box h3 { color: #155724; font-size: 1.2em; margin-bottom: 10px; }
        .winner-partner { color: #155724; font-size: 2em; font-weight: bold; margin: 15px 0; }
        .winner-details { color: #155724; font-size: 0.95em; line-height: 1.8; }
        .no-results { text-align: center; color: #999; padding: 60px 20px; }
        .info-card { background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); border-radius: 10px; padding: 20px; margin-bottom: 20px; border-left: 4px solid #667eea; }
        .section-title { color: #667eea; font-size: 1.8em; margin-bottom: 20px; border-bottom: 3px solid #667eea; padding-bottom: 10px; }
        .flow-diagram { background: #f8f9fa; border-radius: 10px; padding: 20px; margin: 20px 0; }
        .flow-step { background: white; border: 2px solid #667eea; border-radius: 10px; padding: 15px; margin: 10px 0; transition: all 0.3s ease; cursor: pointer; }
        .flow-step:hover { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; transform: scale(1.02); }
        .flow-arrow { text-align: center; color: #667eea; font-size: 24px; margin: 10px 0; }
        .code-container { background: #1e1e1e; border-radius: 8px; margin: 20px 0; overflow: hidden; }
        .code-header { background: #2d2d2d; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #444; }
        .code-language { color: #4fc3f7; font-weight: 600; font-size: 14px; }
        .copy-btn { background: #4caf50; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; }
        .code-content { padding: 20px; overflow-x: auto; font-family: 'Consolas', monospace; font-size: 12px; line-height: 1.6; color: #d4d4d4; white-space: pre; max-height: 400px; overflow-y: auto; }
        .schema-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }
        .schema-card { background: white; border: 2px solid #667eea; border-radius: 10px; padding: 15px; text-align: center; transition: all 0.3s ease; cursor: pointer; }
        .schema-card:hover { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; transform: translateY(-5px); }
        .bit-value { font-size: 20px; font-weight: bold; color: #667eea; margin-bottom: 10px; }
        .schema-card:hover .bit-value { color: white; }
        ul { margin-left: 20px; margin-top: 10px; line-height: 1.8; }
        ol { margin-left: 20px; margin-top: 10px; line-height: 1.8; }
        @media (max-width: 768px) { .partner-row { grid-template-columns: 1fr; } header h1 { font-size: 1.8em; } }
    </style>
</head>
<body>
    <div class="container">
        <header style="margin-bottom: 20px; padding: 0;">
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); margin-bottom: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border-radius: 12px; text-align: center; overflow: hidden;">
                <!-- Choreograph Brand Image -->
                <img src="data:image/png;base64,UklGRtQsAABXRUJQVlA4WAoAAAAgAAAAZwQAvgAASUNDUMgBAAAAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADZWUDgg5ioAAPCzAJ0BKmgEvwA+USiRRqOioaEicQiwcAoJZW7+k2jtAjbTaWzVJ9AZyHJyTtXv+1uy/MP//+tvNMqH/l9xmZL6H5W+5hyH39e3PC39n95X/D+2b5Q7I89/mH/P/2v8m/mP/s/+r7VP1f/kfcI/VX/S/z3/AdlT92PUL/O/8Z/5P9r7rX/C/ZH31ftV7AH9V/03/w9dD2UPQI/d704/3L+Ff+tf879yPgV/X//4dnz0h/of63+jr6H+2/3j+y/jL6s+YP0d7S/IBiX6o/mz1Q/lv3C/C/1T9zvlf/Sf7Lw3+XHzH7Av5B/SP8F/Of3B/uX0MvRbnXsBeyv3j/n/1r2OPpv+F6C/aT/Oe4B/OP3Q/o3uB/1f1A8lr7v/0v1e+AP+Sf3//tf1L3kf9H/yf07zy/Wv/Z/n3+o+Qn+cf4//nf0X27PYJ+83sefuuILEYgOuG5sqXrWeT0qiTwk8IUd4zNk3JuTc3tzbIOZWT8icqZc6cctLVV5ABrQxwHT7VkkUoJFud1xvMFz/F1hglvuqZTn8owd+RPGE/8n5Rbfa6qG5lGTid++RzYs6gsYuiTIw88hzh6pogyeR3HzIUrf9IdL5uxIxJenLap+OlwuRn8o6/seDWT9Hw0QubJuTf+FwvUnxLP6eYA/fnaRKoraHpkEUBca8hSZa3La90H8unJq8vUqH9cF2/ZhX3kS8ZPioR9ms280rvZlRC8UO8G7nPyFda2S5E+yD7Jo4bmycdR/ezQ1HwwPjafwyeWEp3FzO1DH/5izf2aeR54atM3AAvbciijFPJiaRJxX3pZktMZop6w3oGgIzeet42UQrZ2UCfvUlnH8r/cYx/7QlrP20ek8/jyGUzEYeueO3e4/dfl038c/a+vIJLuV7lBIjxL0WnxYqklAN5nYgSIg7WznmpgG4U1iQMwi/BqBz/fnrvHhOUQJO1hUt77RXpvNRxel4K6pT4ItwtFPH0FlU6By8vnLQMI3fA81I3ELFrTnCZ5k9Oo52/+cT8QY2Ww4uKSvGnLsy9J3FvaA36ORBou0nq/47cGnY5erhxBX63GZoL8tUL+KOP9f4vBCA0/1fE46uteTmdX7LT189VSee1DRFXTKMdNoTZSjw8rbEp3u09rhOfyjzQFoLBcU43M9Z8ZKT6/SMiA6kgcc4Iiu+g0Cy5dGVTFW1PPbDWYRtS8jPhsMhwRYq2nY8VUdYvkJPG3iCZZGxzdYw4ZO94v/9wouybE8DBPRDPMfEmfqHX3olM58NEZozz4dZ4LiGo66O8eqrz6zB6SeQbZ7T5rrOOyxp554m6GRCE4IK4orWS4MdJhnRdqQPZhnO6qgdbdXRNBBG3CGCwhhj4ablNAPlW54EjnYH03Mw3A/WlLSa7TkLQ3nKDHOIlKdbo6coN7PGw6oq06epsNSFhOC4/evn7ARdZn0QGs6nBsrfszQph4HiCGBk4RChAFTf5dnKLiZpdyODpih0QG55b++AZhbPWFqSqSE+CBxwxl4QTdzsB8hmt7acvOex12fjf04Q/6wtxOs2z0gKpDmgFGcfid4PeBwZ9MgCtwssJQiQ4DEhSGbbYysBbfWk2jCcUYFlA12245S6wqglK1Sluf8otaN5tLMiavjlumjo6mSYu0oVlc2ZNZ0KAk/djutTrJ074J4MXJ2OCZBL1oa9cgD29vf2NzzjdrQjRwaZS0DNk/J8qVMp8o9Yv0sBxTuXfxTAdcO3sXlHBrygPTkmlPhbom6pZr9M6drNczcLnaCMGPg8ZgL23eNstf7UIm5ctyZ2oetrKa/1s2PnRKkSpFknQZrhNLX7iEDVo3M7QJRNjGChX+3QMtoml7XZ+Bmx4ErBosKAaCSnnuaM8Q2VpaGjQ1DHv+23lHwx8Mp2M7hb41SnxTG5naenGsJOHHtaglTQJFokaG//41xGscRwAP7VVX/zp38+/hTl4/1uPhT+De8C//5FSwYiUezc0Lo1I02HqFQnsfm00qgo4L8LFxTit268084ouzcFSmQAsYTgp4pQfTckUTRtRNzyLUD2za+3F4P1sMGQgAXzpguGv6nKFBvv8R6I560VG1bjSDaymuLRJ9mAUThAne69DXbClQJ0QJAfBg7FsIZnA89puDw7Tri9XUc5aWd9IRDWKfCBbWFW7g6YZh5cgPpGPiwW4bDRdmL16EqRcJjziC14D4zTPBsSpQTVRv/g8ohB4fxQn31u7PUPzw6fjvt39dYhmg6dNNCap5Qrnb4rQPU5t86jQ2ckXZMRediIw4sJNrFtfEM2melnNG/R3IHLpFhmf78Xm+ZeXaduTvS0GJ4Mr1boLpwj/txcuYGx7nitnZa6zW29rsDwmqKOqztDIJMx2a2Py9St35ijCsgHsQwbaYvVSsAWxt+MQv5G/MIvcHxIYDlKyo6tI+/SnPwbB7DbrkSIneHBffr70IzH4OSh4lHmRvdosC0x6sNW/Kwj0VAC4qGkqD8ff1YMVZYG49DyJsQ8LMc+GfkZWUV4BFFeAs5pZV0Do/8qDYA1eoBQfHCamUwSetOCYWLx+qYMlfAp5nHDEDiCCa95e+I02jKInsjH++BwOyYoLvw17LVQvFVN+8a8lMj0ZXJTh0crPK4ABkp1mbn1dpF22xfftRB1F/cbaY9sYizsmlgWIMmCJkxD08P6Er5N9J/0OJC+g5n803PMnXRliMUhMBsCYqAaMR6xQ/DbVPEtOwkaW5zXu+brxnLI7bFdM0uRirptCKNyK5PwBKO8Tw+AEj3/w6VhzlAUL81xcy8DKnQC8CKED2I+p8qiKYIUmvOMTUuB/uIR1aKjU2oAAIson+EX1QyG+sKTq3qc5NehB7TULUZ9e53jPBIhkrFfnpIAdrRjKd8Ibd+gxYzzZqqmobjYy2beLgylVCaOp/VmRGCdkN9CrjK+3hwi5Qsd9qgcVdXvpsGD5LFeDQ2HjLwVyRz1rHZ/oOqxprxv41mZNPYY8x/Zg8/UXZdWhaSE8FQnQH2ATKfYX47Xvdt6VSl5pQl3iOGxfFkvT7o8LoOd8wl8+F9rBJun36oiKmig8HPUNHuXRCMYESvIMfkSjZ7txIzjiu+CLDsZupkPzbEB+6pEGjzeplMYZvTBzBUVNRokATa70rVFxwp2wL45hBvEBhKNjYkwJ3W/OrInMeHiZ4UrEXlw2W2jdlOlP32hhHH6horXO06Am3K3usI7kQmqyAiW83m6MB1cbQGdkZ4SCxVcpZjga0dxIZhYsAKJXvKN6zoY7oMapM1QzFyhjV5YBePxV1ORYYoq0UDQLalhZAG8A5n5yZtQ09LEaj9HOSnLmqL4MyDU0A0bWEn5F0ERqopSRJBuv1aD8vYy0gTLLgyb8EhOnfApND/3D5umscz+u9QkAEOx7EwgelZ7oQnZkHQBLY0aZjZKc9a/pgSXgv7M6OpchITB0N/aVFGAAWzKWSa157pAlCUu2VFbLZ7ZHAPXQp/g5A8Yd7Bts22iUPo7t/fv/4C0jgOiUsrE+wWNpWS6kYiOsBvrksVXczVHJO0lG7jJOuQ5amCgFZrsd+YhcZlX6CCDNyqTk/mdU5Hvlr1eI3y6tYa+gjqv0DG6/VJyTzieawwW7nVfGueLWHnumIOz5JHmmz+WiWDOHYsgPqpLt9bZmskcKoqAJEwjLpmTYtvwP9/lJlc4kZDDdxHPKlb8mFjGm8kISKVdJJQY/UN0bxh5Vxtb34OB4cDvPFFetvWrD/dn8iILijWtLOlw3KhoPEJmHb6cl/Cc5WenSKZiAH6xaPQbajz00DKRlFp/BORPueK0J3Wo2PEU3qb2c7N2eiZWgkfJAr6rr59WS5gNl+/D0igpGLFBIniJqmak0v2Np3OXljfx28fAxPh5HLLc+xVf8nKYxrsYskq1hBxBUkiTyMemAFNZ221eYvNWCayIMEUTTl4+f/rGdzA5UPqu+HWhVaBohpt4ogykvPOOoJCcYzGQM63fq2ZLErqHog/d1BNzw+vIrAqOd94zRy2qXtFV/HtWoW5hGYpkMXjkcAeTQnY0lAvw9JW4AEnJBFZP3qV3ZrrJ9uMDU9SEUTdpKWCAoKnee3jf3Mp9qZYOtw6j2rO6TWBMIc/Y64kqOKCLapF79hERNSsEEbkmsOxR4pvPMKkOBcRWMMp6bVFsdnpKxFF6dd0zdn2heTm9WZ6Kt0Xc2qIGgtwGnJ/vIfjFO8sZirOpLfVw1n9/hHcaaa0lmT8aP+LyhEL9JGWS35v4A/PIpVyN3Cly/FT6QL4L6whFPPX9SwOzDb3smKJUnxBu/6oyU8CmeGyXe7luUN9+4Y09/CIC1WxcqWM+yCkkfTKcYJ6BdGY5g/KXf0vNd6mYc81ue1Y/lpkfoDGrRoRiraKEm2dHb/OaiESY1YXkzfwAkRrFveyiBGQehB4SmeoJ/D924ApUBSAknJTttJ88CsLQfQinxYqPiXRuSf5knd4NucyHt/+rRCmirp8KR6SwTp55M4Sa6IM7SaFr/SkdJd4B8fS/hO8tJIe9hOadEbGKLjAS+NnjbSSN8BZds0Y/k2AawFyKC+GLZIjS5bk+LZMEBpvqpMTyg7BHQaSgYMSfpNHPFq4xDoJzTrNUsxvgbetqt1XfOc5tiVn6DVnOQ38OVcBwEX6hKsnnKnoEWMM5u7Ab7gt08Q5qiMbno6uxhEUf6SSGbDj0kooQWgNtiVhM4DgSBmglA4TXpHX5MLSlu9v5vJkyfm8i2wcloZDt8J8GEKg5ylrMDL1LcVW7utL4KyyVr/rMd5HOq0CI/+OFhjTov/3cLtkxgmuOin4veAEnogmkdDqXm3B5A6Y1YUwbynA4KyM3QFJ9SX7kwAk8iab7B3KNuD6HUYk7hcVypo7RDQbLxz2wIth2nuJFdK4RH3m0RhRSUEswBNsCwcAxEpHZrkk8Lqp/WXU5/WyIT59CHoKzk9+c0xf7xW/+oNCiiqh2f7mIKoP9Cdw/nKetPwhRdEqmDdMBG219Q/UnG4t9wV0Nuxh/4/nz61Rz7POfwz+OE3+bg9+TLvhlyu0gDUz6/p7uN6naa0K50nBzOUA9KKr3FjKDNAr+TcrK10NYRnYX3HZmzcPqAunG3nQbSQOkNiD19BCbgUL5gQDi2vzGBxVogD0AJfFsdIkHusdc0wXGC8OFkwEGa4Vr9hBDsHceXjfqp0vcGq6L+e7c+fizQ9OUItg26TXPiTppg9sp8B+R4Kg9FwZ4tuCE+GpiZYBAyrdqxoyT3wikx763ixJFmNGt7ICLokboZAmz9cEBVasOEP5yP0VKZ+s7EyNJxrUKa3mU7TKyiTqR8uG4bse5HkcYXuDMBEna5xEbH1gEsWk0Y/wDE7+lkYgEBtpA9aOdZ+nyvd2EOn8/yT5m8kjkRcwkxDnsgo3nxYPyD9fV/1iUjejLlj5xIrmWDDekmw4qwOkOf/oCLaHisFfs11eXgklrfdsMFS9a5pJIRFXCOZ+OLioXvVXKo3H9azZWIfyoqSjC55LKwQPeoG3nLW6DM7W4XV+mZtVvm1x1t5s5TdiEttQaMIghJLyrCj3vTXLiF8cekdd9RL+OZXdEcbMQeGtV2mPJ2piSGufvBIluvmCfNX28Gnhf8cVy92do9oZmpDkILWQFFOlCLjAjX26vdkMO9nFkgkbUI0AxIsI59jv5JnsB37Y7j8T3fiT//fXVjVrLL+WQU89r4FSq5KZk0qG5VMLqyf+FBsmDHM3qUgKFX3sdCC9xQ8+FnjQtjo1sDbcxNYLfXMJJRxsch0C+nMSYqJwCSisfPOfdShdjoSnlq3ogu/sJPGt3Ie6v2Y6jxSVLf6ws8aa4kpa+1qG8AbFUxlwp0q4nBsyhzLJ6KSjW5J97vum3oYHKGPHphVuajpi2NfNXfIdI4IVDQwgLrL2ck5EX1C1U9M4myBvaEvxt47o/gMCumu2HciwDJBkMcSEx1a9kfphZ05ciuvNb3PaEezi+1v1zPPTC6EKt2p2ZyU+DeJmEDEXxM/A8Ghq9nL0sVl4bh5tcDU6q9flITVsovXJRi6CCEaaK3zpqgLYCQUEir52kZ/c9Lj8ye7KzOeg53JNn9Z7pjas1Ry7zD01ZTIraG9NEIDaSwvtTWbupBogtOdi0M6KHEa3sxfBwME/0636+ex33ibSDMEI+ViB1oa80UcUL+rmImWOI7tJcSxHAyp0BE98lLR3N91+aMd97zV7MCDXBvpq0hIvWsd2V2qqmofeeF0hLsmZHvY9Tq/KIn2Dqsy3JkiW+oRAfIJnk4UyJvWAfGpdSSBDL6TS162v4gQozosSlzRMlrvCY12Fef5Xnhpwy/vzBwFzpZOsMXTvfY4T1lR+3nn5akhcrgO/3Elz11xfV0GvWoMRon4rFlFA9KlXnyazMyqrQwLQay+WI0E0ADA+qDOuqRB+Vb+JJcYjx8hF13K0eu7nFF9mK7t3n0I7AzmfMybCVHbZmlxxPXrLOnaHhQ93txbwVAFv6Gu5Q+M57QrMnH84G3igOMmmFbcdyFqotwqmS10XdlmmEA9W1PBa4n0bECGqocNA5nfE2XN9W6ImSJGG5WAoVdCtGxO3/NUeNWQ216Apkk1C5/w3ltZrl+TV0aJJam3MEwWFFxeqv7Nu4tMD5G3I9IQG4UoLxRU6DNHdz55Ziq89qPfbrlfCbGKng+Ae1LxVCQdC59iEOhaFV7O+HIgAG1nwT0jCFvigBu9NZJ5lGG0y9iFaoZqLSpHplNKhTfXP9Ru1rIJ524Xj4ZTzatxMSgJffb2kOOLziZYn5umgWUleTICxLvxCcZQV02jUwe4/M3vs5lHq8xQxIpYPCn70REqhbDsR9Kr1k6LuVuX7iaJCkc4t1Daty8z7T/7/az2l2M3t9oD2/iedziEQ8cUq0zAJQv37LoUVUAUWAABA+Y2UhLsmSHs3XjN6l40xTrZTGBpnDumER2f50SiqJPz4jJYFtjPgu0TFSjZWT5pPiyPrUplKSZQkZCyjR1qqJsgR+GmRe/YdUJh99bd0scEE+QZSxYE6PT0LPjM0vBea78juMEllrFX3N2JUxiv2wiZyoiI3denCp9Y23BTzqFwBq+SYhrj+uq0rDrz++KsE/euvZOmVXKh+Sq5hHnSsqlY46zsBWN/w8ylRkFPI4JidCauXI+ZMxLRrOlJU+/57t4VneTYjRXcbQxcESSU1HwS191Fz/IVCyc5DUgwMhJlrXn2hInCOfV++HJ7fy6x071/LmH+deL13cuTHTL7o8RncnwWONeqgJTPO8IkYliK6pLcS2pbeNnCrke3EcSqwK+Pg2X1LolaXndJZAYnlcIFCw81dVXn+a+UDXVVTLegqVTjv4OQSTd4CgK5WZG4sgrrEZfwfkySMjkmlTT7S0Njs6V9cwQj4drLlV3a4Qy0gSjV711SpvLwJaKFbovkPfKN4VTdIwBe+JIL0X8Y866ZeFPClyyAe/lk5uqEaO/XVZ74y6QFbmpbgG1QN6p1CDOMpHulpt8oZkVTYYAgvlSwCLNAIBOYwX1fj9QHymtvaRPrhR2sEvt4Lb2SyLxkLe2VL0gkISQcM28YlQSIfPBzzrKgj+stNCbmOxcOBNyJEgnofCn7X6P00JBF2eUHtg9TxBzYVKYI2NxQbiWytRlrnHshAxxzmYSRsyMo2P0V4lxaAqvmZXlBAARxQVkVQL9gGkeeuA+ZnQ+EaYpuuoIv2fZAipBf9C7CQbP/6vJv0w2ggIWz7404akN3vwA/Uw0BaeIxq5elw0kU+JvGfoBizH8KvA8JCkUxQYygmSNIhwPP42lLBEFxnJ1eFDbMUww94NfgHqamWvyWhjgzY9kwUjF5uGxueyQlrT/mLKwymDQVM6sse10rGFmnms7IhjT34Do/Cijq6mDgmJuVWueo7MmyxkeCCdu0BiNqmdHbgd11W0iyvtnDd79rXUpErjof2h3gIiI+1uw8abCYp3/m1twCfZH3Wuk30F1Qp9DuKTIr9FjR+NzAE3L1MyIMEkInqqQ8JNx9cIEDodHm2U4LSEcRB9Oly/CEGYHFXANyotkD+JcYB/OyQGAkG4pk8R5cz53hFLa4CDyLNek5WfanDEhv7gnWi8pcSFqOtFgvEXKfzfuoRxzcuVBOSCWqQlU/H6aXLjPjSXv378gkCgVHSkGfyC7WoIrMX6RX0up9dONqR+EgyX2LAKt+MkXkJK/D3pK7fgH8U+5kFRHOpuB2nv4hpuscX+VuU/IOoK86fm5lniG/wLO8lZdDqxZ07vndrvc1ReeMhRDtghGYm04FHST4C2+6m0j8l5FBSUW7Qm5781K/siN0lCjOrtcjYMaVXlO7uiukBa3+879GM5xf/9Rgd8C306+faz6tcuj2YNZPgQ4Elcu5FZQc3wS0jztmuNqBpEsNVtuxjQ06QK+4OD3qvnexcfg7rkYIGRbIGtoZNqFIkJF3lmCmHMDHO0IgVF8WUQZGUjOw4qtiX5d+UhPR3UUILc1cdA/s1g9rlEq0ecoSUDzHQjsiyGthYm1QM3AfEdQRlGlNf9IBEN//dZ33FuuHI/sYKWPrYQ2adaJ2WZ5aXgwQiThfa7RBWod8QYd7BgQGYZODHGbJpKY9stz4PQIN5kW88jUW+f7OdB7B6RM0Fse189d3B/sTvx0hTmXJ0e9Hz7W+Pz8jUklsk32VcLEsMXEux+FiH19a2ZbLHl+a9BQyIjgqLghy9DYzHrTCf+n/L6YprLnSmEMAYl4ftLYbewtMc8UJOz4Kkl1BIuRcm57xh+wRpGV4X6fgBkQ7MZ6TKYwIs114s9wtHzrGnDnEoVlus3my20mvqE/3GForY2bk8ot4poiGfk/amsO/vNeHnBDy6Hu+EnplcQ4vlj3jJ5UlIz6nELmB27/FgcUD02PhMaCUZKgsVjCfrsz8wg4EL+L+mLm6A/Pvt9JKWVXqdo5fiqyJBOygNgReTkKylUA4/+Xwotr689vMUwKsiIpvkzp/XgTxqlXYF/LCTJ864Bsb4XwS66gIgg83thA+hSVU+Nbn+ptmSbTD/4AvSExtJYN6IQzTLR62MYDnQf5KQ8kJOhf7FKzgwLNvxGFeVHzqyTdHXdkGlVFJIZhjlX1lWBbgs49PmVPz1IxhMXz+j7qPR7vRKGK0TDdLAbQu9u7Cn6OgYKXGVyBF8r1KrJAR61V4kuheW23nA+s3u8xnmWEgzADpZIzXBC30txzD4riIZLGo97mtjkGGW1NQk/ZHgXmaydYY7LQGocuZcYstKEN1YYD7nyMaOKDj038/hTAr8V28jwJacU7skGlen16PQqFxYdqVanbaaYbSTgAzzRk9W0yv2IXk/jlAY4xiVYDZCv1X/gI1tlLqfjfoRSHtuTCre8iB1I/yVQGHkhVJSWFlV4SI3kBhX/hCgcXe2M3PK4N3CGbSzO6w3URn/hf7oI/FfclE8mtwfHisT4TpL+alPxJzVTM5XdCNKTCrq0whpCWmHGl7UYmk1ZoCAxr0Gle2ruYD+Whqq0uJNQlMyMHFS3BkwYrEiSz7BNEPfuQrucl1WIrUxThkxGs5sjkFCM2EbmQv4Vhdg6wJ5E8Q+oNh7P9FyQZMxWu0np36TsusoRG/BKxwCq0MfeeKhBEoG9kv6Ei/+PFI8KrG2ezlRvyynnjCZ9Z+u0TT5TrGADmSM9ojba+kfzOtpnOgEn1OgsGIjj4M2Qoz332w/Wj1POiZxMpF979PNoj866ylaV24d76BYIBAEeGzBLSOwsKWObM95ALl13/YS9cbv2MUVcHsPqzES8tfFfibTsyiy0xAACUz1NptwfsSkDeev0C4jdrY0Rh2TZcbCGhmEkfwJEwdNWCezTOmbiykaBHECbHdWdjki3gTPZxdJ9vzCOJkdciI5q6zvN0Proeu8kixnFal9RMcGtQ+/1FIAqBs+28fEmH8uv6HFFTKvP3CDiSJHzDQztmp0bE17fI5bQaRsz5qyEQZ2w9wOWNzXhgBKlAqYqLpfiudIQ+7pzj3/kxHUx6L12LvA/9gmwuIT7yLHbP7wFr3kNqxdmfQ9nP71NNQACjGMamNwzIg8aoYwSJcHrfAZj/4iptisbeacFI8iqWVV9WpGFDzQexrykxhFAMXDrL1TtjkzWrT+VWmj5l7ViJHZedffLUP52xBck86xfHlHxMRZ2paE8IFvalW6XUnPAJwUo/gjpsHSx6XG/6+w5mUw4Ef9QkTLb2Ao0VL27JhXGrUg2+Q6YJEZXzBuuResf1YJ4fCb+/xXHiXIBgELKj3183NqAOOuMC2WLcRYBni2XANlTCvyiROnZa2oHcq/IqIBJhCXzHsVPse6ATOwIc4bkgFoW+DsHydgp3JSG0dFHsCs/7FEfpUXLt+P97kY5oDxZZ3BubEE0Mx3s01NFc1VmNOVO2mtl+ANt6hKoo+oAufImTWvsoEcx04t63moPsmGiOMhVUiHsimvKmRddGTBiipj3qI93U8b9ciBVR0uRYDZDGlOPny6Vahf8i/2LZMHRtZoTjs0RnL8rYjeRqumJXxK0DSWDSqVnvHRcRWMRSK24UnNHERfy9ZTqeGH6Gnm7bZs1z17Sfom88jeera6MgUPvJQXfHBZjjtHFSxqumzo2EhmKH93mdC4k6QVbrSC7qwkaFJj13UQPxi4uL/YUc4PGGs5gxV8Ip96iCWbqTYi+sqkejAG+oKXzUTQfZQprsaXdl+cl+BKkinQVpYHIDROeLKzWATDVZUcit9BB5/VhLX5GDSZLKA1S0g3oCVXTATFs9DXSSoNsJzYRVUP+423LXbvB91mQqn3OfYC5b4GtX/bBNEpF9/jPJZVurAuSFakNuf8uDOJ6UlxN0Topzoa2jXAYtGuflHJjofTPDh6ZNZKKfKgAo7nobNanvEGeeg/j/LUlrDJ7wdEg1L2/m/EVSxm5Oo0hLd1JqJNITonTWCk8QUMsvLCK5SOn0Owbc3Ajf7MH/rXdNfjDwSd5896U3eZI4Oja083t0Sh1i8M8j9Hs/NLzX2CMqwNEeqiqfmLR1QwQBcsWJSvTz8GLMGT81TMPfbbHn9D4gDM++FQwp46t3/oG/K8Pk5LyW5TZrimBXg9qLtylDZT362v6uKRwfzGmkZrnqXOUZP5NF/KBFWiUytE3+pIfbXx0fTdcBTPQCf+zfECNZYQ5za62Le4XLzyN/qvP4r378DjqgzjdgTcuxlg4VeMBDGM1/dAdbTxxb7182CaC6kGMs1TPXSzhnerTuRaQDo1T60EfhAWRYEt94CtbgpRc4OHB3x35nyymWsvKs+Uw/I2+uBfyQXB2VGUh4ZLLcppxPQMtf6wFcYGov4et9BB+t8wVlUu609H3WaeOEAgzYq6Hph78+wvHE2crAxpsK9npNFQ9FjPmvPMwNL13G1Q/tqY3kJSR1iii22Zn7QGDIk3ffLa3yYdb82E4LuofJ3gFI5fDfqbDholo4UHtwNql4j4rWJCxtC/wHE5ZKKJcAjAAbav+scIB5nP/yfkDh7ZZe/sAuE0kzTaabvmlF4lV8bUBMA354XwChU1gIEMaIk+zfOXUqNAlet0TBevbUjMQSCOWPDkshAnHAUhxwB7CWRrY/eB2l/yMSwCcHimNzVLCy+kpR4C4M9V5SgHgQDBB9fQ/wCBYbdoWM8cbXp5TYOys1Z2sQowCPhEuTLfkdiLarNfjg5xE4MD+Tit7xBXtXb5f0IpxABoCqm9qcLllPIUGwVsUV0dFMmhXHqhHxifFIFujcqZODZ/Tnh3HsNf1eimpJceUwi5vULfC5Hg3J/QNbx/RXF7vHtJBr+WpsvVz2SS6zWyvzLSPg4QOqhgG1qwQi9Qi7vrosYIwZYcvKSj4zoLESIpIImHPLaJhZWhW0DhtSy/JVu3FbDK8nJPrz9Cea8dUpEhxdfH0qwk5JRvEfp3rh3T4sX0aVhkJ6t9soWE3ekGz2XI8ZZZaeBRy3KDEznMyttjDmT13HRFiQO00aoyZp9jUiV9M5Ei4y/4VWc1XAlOrBzJiTiHyQPRIKxTco3+0AfEgu6axQ80JXC0pqk3jQ73Qid2k7oZxx7OtJco539PjS+/kIoyNwSSjgbNP9q/SGb5soJHNAYpFvu+C6bllB/btqma/Bz5tulVGx/xDbfWxBKrpT/8Hc7Q3ROzBeE8Jeckspng8gr3/n7jPx5ZAXdw2HJxuxyn7RCVn6+BjMlrG8iNHStce5WnIBRHInCvT5eiBfjxe0o7SfnyycNW5thrT3219MAnT2EyeSLTES1fb6BfdWnn9iN1yLReyp15D/iGC+xX7wcNZ4dCjtt5QjeP2GzPww57SA2lEjH6erwBdVR5fVPC6JvRkhI836EWy/eK16xSpjXvROfnUxbQrMW93M3/C+Exr6XTgWMETJgyoodv6huRXJv+G8Cw+n+poGLNJvHZHLmjv6cb9Ti1a2v0pJVcTFaFdfZzJU+IIzrcr8YJTKeNnhSYSeJjNrbRFd5MYy2uzZUk/Wd+2oveZ5HbVR9Gieq/s6TVRfy+ik0jYgul9+R2r1s2L/T0/Rb79iMhEL8m6fXJSJaE5Z7UV7aqfJxOyzgsl+YO4xfeYjRGNXxt/YC5JiNTN58c9LYq0kagAo8VI9eSX3r7YKmBW7zzFRhQogKemsgPx3rLmrZfk9VsQKFl6ItGezO57BAhwusJRsa61dtXxOjFhK+S0NxNONRHE8iZdj+NrYjzyt54TA6u4DhGSzN8FDns6u0A1AK3s668FUvzIo6ENM2jzxGoi8qlpNZXUMR/RW6WlbXE41/M3JeLVOO81hkbHoopsKNaOaupAR7jESiZyK5iMGkvobHEa6WjwcO8vCiYt090hfQIuORTpVI6KKe6fEjnkHnbaR1uv7nOsd6R7hgZl19vPmCy/EJ4wqpC/b8E/53z4Vzl4maso4C8k3R5VId8sMVyGyl/ohRVRdgRHP6BpUQBPjJ1ZFLsas+mE4YxWDklS5PKG+2rmvt6K/+qvkM2NpfkfiVgrbqPF11BXBrdGKQWu0YSQ9Oa3yOFW7QO95Rkhve1K4Roj5SRImRjqhw0od9fwbmImLhnZfYRFJpoGJD0cKc/nScneXGaLsXrZqhN1ElmXUKTE3sgfTg0hcSZRSCCMtVFMxuhr1WUBWWqVoxOh5lrBU5TzW4mEKrUTPnpSuEAxVb0NH4ctvarz/84yS5czEZVA3opNRT/dik7WkonZxJSZVKw/GyVnKJ3LPFLM9qPlrQhW79hAcBX5qcMkMp7UOQVVhSaRGlM+1ww7naXBGLzXsv818YxxHzjxfeZJC/w3E030jbmqcwp3Yn87ZGSU24nAMqgBpyX0z7MInrABVnmlCcl/oV6puPnM44ODzPHMaGjt82haaVoujv+oqU5NDjvz/CCPEMf3uUsRsFdzrn6x5GmGjp8Jw0NsQfjYJeJfx7pOf2tSmtPHWt5qHvLAqycpw+N3e/UFyXKuCoqxXPBTNtl6qVge9ky1/1b8VNdiG7g7pt6gk2WZDRNcAe0DsXtP0MTYKBvlTS2lGKNIWnAJSXGvPtSL+cdH5IsmXFfd8brGOx6wnPGXyc5PeN2Xg3mh4xtUgUrT1ZbugGEzTy/9TicQfToe5nbx0S+mAE5q3/09KiaxaaAhg9jwQfoc6YOxS7QgXdHu7CeB0GXCVC8Uu+H6YnNlH+3PcHdDTq8AMqQKmrmLWCDV3JZaWxu8inD4i1mdai1KRv774VtHbtbtUsHn+ChninaTePn3buWtdGgc5LP4AGUJ+rPmZwGJrd8Mn+2eu8ZRneA1O7SqwIYUP/3lditMnHWwiHIz5pdZIa5/bSsSNly8udL1hz7bqJux1QgFUJwmxUGgBP4E4AGlAT1U+WMkcIwL4EMDuEKBUvep5LZvSo+Usr7JgxpgORdmiwKsuYvc7cQUAZMeQ1u5yZ0/vrV6+mo/8fy1XMVuGmvXB8zvE3mL1iBckqdiGuHhvCy4wpNFQpNUKkDLinZb9YsMPXMbz9AmbEkd9H8fgOAp6YQ8J2XH5sbCdtyHjco5MW8SFmjHcos1v24uNw/KejLXl50Vbvbk/Roj0RxTtXoaYc+ILDc5ZEIykDnri0kd5uAPx2K1/oXpZ2tNWI8/tQTHQwtlMgGmaY8hwUBnZtoobN2KrDsmTv5XYm1hMy0gXfnZnfddes/csf48FGWgEI9CMIJZFNYctfMi4AnkSDA/iA1A9vCClPQ5VPaV1l3omhzUmppS6/Mu5sIZxJaQP02TRAwh459LuK98I8XzJyCvT0zffPI6bUjPa6kcm886MbAKNCcy+E6H94p0tPDX5vJKFcBp82yj4+3EmswCVWW3fRxmmdSyAwFJ0ND1O3MsGAqjGNpD8fU0s2SEMqb6SzJEU0ICTok0VAdaeqdDa3Qyl/6zTJdvd5qyPp3dgtxx83YqxwR8RO9CO+uqoR2LwlwBP/EXXTtsB8aN6rbs1o9KCjLOqsxlg2lS7sePthy08N/+XVA5WGwx13y1cpLJ1Rba2f++WA38I4RnqhoSKVdB4RP4tEeiMDYiPVtstNY83qhJUYOgNiuNJ8YIhN8B/FHm7L7deq20M6Hksr6Xzm7wt5oNlvURXanZe2EgE1SAqxeOharOsrBHJocvmF9K4THoDNxwhi9UOeTSH8L3Uox3cqB+25PZ1CTs52UYAHOuglCq7Iw3ArICgERDfasS8AAA" style="width: 100%; height: auto; display: block; max-height: 160px; object-fit: cover;" alt="Choreograph">
                
                <!-- AppsFlyer Attribution Text Below -->
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; text-align: center;">
                    <h1 style="margin: 0; font-size: 2.2em; color: white;">AppsFlyer Attribution</h1>
                </div>
            </div>
        </header>


        <div class="nav-tabs">
            <button class="nav-tab active" data-tab="attribution">üìä Attribution</button>
            <button class="nav-tab" data-tab="skan">üçé SKAN</button>
        </div>

        <div class="content-panel">
            <!-- ATTRIBUTION TAB -->
            <div id="attribution" class="tab-content active">
                <div class="setup-section">
                    <h2><i class="fas fa-globe"></i> Step 1: Environment & Consent</h2>
                    <div class="control-grid">
                        <div class="control-group">
                            <label>Environment</label>
                            <div class="radio-group">
                                <div class="radio-item"><input type="radio" id="env-android" name="environment" value="android" checked onchange="updateAttributionType()"><label for="env-android">ü§ñ Android App</label></div>
                                <div class="radio-item"><input type="radio" id="env-ios" name="environment" value="ios" onchange="updateAttributionType()"><label for="env-ios">üçé iOS App</label></div>
                                <div class="radio-item"><input type="radio" id="env-mobile-safari" name="environment" value="mobile-safari" onchange="updateAttributionType()"><label for="env-mobile-safari">üåê Mobile Web - Safari</label></div>
                                <div class="radio-item"><input type="radio" id="env-mobile-chrome" name="environment" value="mobile-chrome" onchange="updateAttributionType()"><label for="env-mobile-chrome">üåê Mobile Web - Chrome</label></div>
                                <div class="radio-item"><input type="radio" id="env-mobile-firefox" name="environment" value="mobile-firefox" onchange="updateAttributionType()"><label for="env-mobile-firefox">üåê Mobile Web - Firefox</label></div>
                                <div class="radio-item"><input type="radio" id="env-desktop-mac" name="environment" value="desktop-mac" onchange="updateAttributionType()"><label for="env-desktop-mac">üíª Desktop - Mac</label></div>
                                <div class="radio-item"><input type="radio" id="env-desktop-windows" name="environment" value="desktop-windows" onchange="updateAttributionType()"><label for="env-desktop-windows">ü™ü Desktop - Windows</label></div>
                            </div>
                        </div>
                        <div class="control-group">
                            <label>Consent (ATT / User Tracking)</label>
                            <div class="radio-group">
                                <div class="radio-item"><input type="radio" id="consent-present" name="consent" value="present" checked onchange="updateAttributionType()"><label for="consent-present">‚úÖ Consent Granted</label></div>
                                <div class="radio-item"><input type="radio" id="consent-absent" name="consent" value="absent" onchange="updateAttributionType()"><label for="consent-absent">‚ùå Consent Denied</label></div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="attribution-type-display" style="margin-top: 20px; padding: 15px; background: #f0f7ff; border-radius: 8px; border-left: 4px solid #2196F3;">
                        <strong style="color: #0c5460;">üìä Attribution Type:</strong>
                        <div id="attr-type-value" style="font-size: 1.1em; color: #0c5460; margin-top: 8px; font-weight: 600;">Deterministic Click-Through (GAID)</div>
                        <div id="attr-accuracy" style="font-size: 0.9em; color: #0c5460; margin-top: 5px;">Accuracy: 99%+ | Device-level matching</div>
                        <div id="attr-signals" style="font-size: 0.85em; color: #0c5460; margin-top: 8px; display: none;"></div>
                    </div>
                </div>

                <div class="media-section">
                    <h2><i class="fas fa-bullseye"></i> Step 2: Add Media Partners (10 Available)</h2>
                    <div class="info-box"><i class="fas fa-info-circle"></i> Select partner, type, date/time, and lookback window.</div>
                    <div class="partner-list" id="partners-container"></div>
                    <button class="btn btn-add" id="add-partner-btn"><i class="fas fa-plus"></i> Add Media Partner</button>
                </div>

                <div class="media-section">
                    <h2><i class="fas fa-download"></i> Step 3: Installation Event</h2>
                    <div class="control-grid" style="margin-bottom: 20px;">
                        <div class="control-group"><label>Install Date</label><input type="date" id="install-date"></div>
                        <div class="control-group"><label>Install Time</label><input type="time" id="install-time"></div>
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-primary" id="calculate-btn"><i class="fas fa-calculator"></i> Calculate</button>
                        <button class="btn btn-secondary" id="reset-btn"><i class="fas fa-redo"></i> Reset</button>
                    </div>
                </div>

                <div id="animation-container" style="display: none;">
                    <div class="window-visual">
                        <div class="bubble-container" id="bubble-container"></div>
                        <div style="text-align: center; color: #667eea; font-weight: 600; margin-bottom: 20px; position: relative; z-index: 1;">‚ú® Attribution Window ‚ú®</div>
                        <div class="timeline-bar">
                            <div style="color: #667eea; font-weight: 600;">30 DAYS</div>
                            <div style="background: #28a745; color: white; padding: 8px 12px; border-radius: 6px; text-align: center;"><div>üì± INSTALL</div><div style="font-size: 0.85em;" id="install-time-display"></div></div>
                            <div style="color: #667eea; font-weight: 600;">NOW</div>
                        </div>
                        <div id="events-flow"></div>
                    </div>
                </div>

                <div class="media-section" style="margin-top: 25px;">
                    <h2><i class="fas fa-chart-line"></i> Results</h2>
                    <div id="results-container"><div class="no-results"><i class="fas fa-arrow-down" style="font-size: 2em;"></i><p>Add partners and calculate</p></div></div>
                </div>
            </div>

            <!-- SKAN TAB - COMPLETE -->
            <div id="skan" class="tab-content">
                <h2 class="section-title">üçé SKAdNetwork (SKAN) Complete Technical Guide</h2>

                <div class="info-card">
                    <h3>üì± What is SKAdNetwork?</h3>
                    <p>SKAdNetwork is Apple's privacy-preserving attribution framework introduced to maintain user privacy while enabling app install attribution and campaign measurement.</p>
                </div>

                <div class="info-card">
                    <h3>üîí Why Was SKAN Introduced?</h3>
                    <ul>
                        <li>iOS 14.5+ App Tracking Transparency (ATT) framework</li>
                        <li>User privacy protection - no device-level data sharing</li>
                        <li>Aggregate campaign performance measurement</li>
                        <li>Elimination of IDFA dependency</li>
                    </ul>
                </div>

                <div class="flow-diagram">
                    <h3>üìà SKAN Data Flow</h3>
                    <div class="flow-step"><strong>1. Ad Display</strong><p>User sees ad in source app</p></div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step"><strong>2. App Install</strong><p>User installs advertised app from App Store</p></div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step"><strong>3. Conversion Value Update</strong><p>App updates conversion value (0-63) based on user actions</p></div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step"><strong>4. Timer Window</strong><p>24-48 hour timer + random delay</p></div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step"><strong>5. Postback to Ad Network</strong><p>Apple sends attribution data to ad network</p></div>
                </div>

                <h2 class="section-title" style="margin-top: 40px;">Digital App Signals in SKAN</h2>

                <div class="info-card">
                    <h3>1Ô∏è‚É£ Primary SKAN Signals</h3>
                    
                    <h4>üì± Conversion Value (CV)</h4>
                    <ul>
                        <li><strong>Range:</strong> 0-63 (6-bit value)</li>
                        <li><strong>Purpose:</strong> Encodes post-install user behavior</li>
                        <li><strong>Update Window:</strong> 0-72 hours post-install</li>
                        <li><strong>Key Rule:</strong> Can only increase, never decrease</li>
                    </ul>
                    
                    <div class="code-container" style="margin-top: 15px;">
                        <div class="code-header">
                            <span class="code-language">Swift - iOS Implementation</span>
                        </div>
                        <div class="code-content">// Update conversion value in iOS
SKAdNetwork.updateConversionValue(42) // Updates to value 42</div>
                    </div>

                    <h4>üéØ Source App ID</h4>
                    <ul>
                        <li><strong>What it is:</strong> Bundle ID of app where ad was displayed</li>
                        <li><strong>Privacy Threshold:</strong> Only shared if enough installs occur</li>
                        <li><strong>Purpose:</strong> Helps identify which publisher app drove the install</li>
                    </ul>

                    <h4>üè∑Ô∏è Campaign ID</h4>
                    <ul>
                        <li><strong>Range:</strong> 1-100</li>
                        <li><strong>Purpose:</strong> Identifies which ad campaign drove the install</li>
                        <li><strong>Configuration:</strong> Set by advertiser in ad network</li>
                    </ul>
                </div>

                <div class="info-card">
                    <h3>2Ô∏è‚É£ SKAN 4.0+ Additional Signals</h3>
                    
                    <h4>üìà Coarse Conversion Value</h4>
                    <ul>
                        <li><strong>Low:</strong> Basic user engagement</li>
                        <li><strong>Medium:</strong> Moderate user value</li>
                        <li><strong>High:</strong> High-value user actions</li>
                        <li><strong>Null:</strong> If insufficient data for privacy</li>
                    </ul>

                    <h4>üîó Source Domain</h4>
                    <ul>
                        <li>Web-to-app attribution support</li>
                        <li>Shows domain where ad was displayed (Safari/web)</li>
                        <li>Enables mobile web campaign tracking</li>
                    </ul>

                    <h4>‚è∞ Multiple Conversion Windows</h4>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 10px;">
                        <strong>Window 1:</strong> 0-2 days (fine-grained CV)<br>
                        <strong>Window 2:</strong> 3-7 days (coarse CV)<br>
                        <strong>Window 3:</strong> 8-35 days (coarse CV only)
                    </div>
                </div>

                <div class="info-card">
                    <h3>3Ô∏è‚É£ Conversion Value Mapping Examples</h3>
                    
                    <h4>üí∞ Revenue-Focused Schema</h4>
                    <div class="code-container" style="margin-top: 10px;">
                        <div class="code-header">
                            <span class="code-language">6-Bit Mapping</span>
                        </div>
                        <div class="code-content">Bits 0-1: Revenue Bands
  00 = $0
  01 = $1-50
  10 = $51-100
  11 = $100+

Bit 2: Subscription Started (1/0)
Bit 3: Premium Feature Used (1/0)
Bit 4: Tutorial Completed (1/0)
Bit 5: Social Share (1/0)</div>
                    </div>

                    <h4>üìä Engagement-Focused Schema</h4>
                    <div class="code-container" style="margin-top: 10px;">
                        <div class="code-header">
                            <span class="code-language">6-Bit Mapping</span>
                        </div>
                        <div class="code-content">Bits 0-2: Session Count
  000 = 0 sessions
  001 = 1 session
  010 = 2-3 sessions
  011 = 4-5 sessions
  100 = 6-10 sessions
  101 = 11+ sessions

Bit 3: Push Notification Enabled
Bit 4: Account Created
Bit 5: Content Viewed</div>
                    </div>

                    <h4>üîÑ Signal Flow in Practice</h4>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 10px;">
                        <strong>User Action ‚Üí App Event ‚Üí Conversion Value Update ‚Üí SKAN Postback</strong><br><br>
                        <strong>Example Flow:</strong><br>
                        1. <strong>Install:</strong> CV = 0<br>
                        2. <strong>Tutorial Complete:</strong> CV = 16 (bit 4 set)<br>
                        3. <strong>First Purchase $25:</strong> CV = 17 (bits 0 and 4 set)<br>
                        4. <strong>Second Purchase $75:</strong> CV = 19 (bits 0-1 and 4 set)<br>
                        5. <strong>Subscribe:</strong> CV = 23 (bits 0-2 and 4 set)
                    </div>
                </div>

                <h2 class="section-title">AppsFlyer SKAN Solution</h2>

                <div class="info-card">
                    <h3>üéØ What is AppsFlyer SKAN?</h3>
                    <p>AppsFlyer's advanced solution that maximizes the value of SKAdNetwork data through intelligent conversion value mapping, predictive analytics, and comprehensive reporting.</p>
                </div>

                <div class="flow-diagram">
                    <h3>üîÑ AppsFlyer SKAN Data Flow</h3>
                    <div class="flow-step"><strong>1. SDK Integration</strong><p>AppsFlyer SDK tracks events and manages CV updates</p></div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step"><strong>2. Event Mapping</strong><p>Events mapped to 6-bit conversion value schema</p></div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step"><strong>3. Smart CV Management</strong><p>Optimized CV updates within Apple's constraints</p></div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step"><strong>4. Data Collection</strong><p>SKAN postbacks received and processed</p></div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step"><strong>5. Analytics & Reporting</strong><p>Enriched data with predictive analytics in dashboard</p></div>
                </div>

                <div class="info-card">
                    <h3>4Ô∏è‚É£ AppsFlyer Enhanced Signals</h3>
                    <p>Beyond standard SKAN signals, AppsFlyer adds advanced analytics and predictions:</p>
                    
                    <h4>ü§ñ Predictive Analytics</h4>
                    <ul>
                        <li><strong>Predicted LTV:</strong> Machine learning models estimate lifetime value based on early user behavior</li>
                        <li><strong>Churn Probability:</strong> Likelihood of user retention calculated from engagement patterns</li>
                        <li><strong>Conversion Probability:</strong> Chance of making purchase based on similar user cohorts</li>
                        <li><strong>Revenue Predictions:</strong> Expected revenue in next 7, 14, 30 days</li>
                    </ul>

                    <h4>üìä Aggregated Metrics</h4>
                    <ul>
                        <li><strong>ARPU (Average Revenue Per User):</strong> Revenue metrics across campaigns</li>
                        <li><strong>Retention Rates:</strong> Day 1, 3, 7, 14, 30 retention cohorts</li>
                        <li><strong>Cohort Performance:</strong> Comparative analysis across user segments</li>
                        <li><strong>ROI Calculations:</strong> Campaign profitability analysis</li>
                    </ul>
                </div>

                <div class="info-card">
                    <h3>5Ô∏è‚É£ Signal Flow in AppsFlyer</h3>
                    <div class="code-container">
                        <div class="code-header">
                            <span class="code-language">Flutter/Dart Implementation</span>
                            <button class="copy-btn" onclick="copyCode('signal-flow-code')">üìã Copy Code</button>
                        </div>
                        <div class="code-content" id="signal-flow-code">class SKANSignalManager {
  int _conversionValue = 0;
  
  // Update conversion value based on user actions
  void updateSignals({
    double? revenue,
    bool? signedUp,
    bool? madePayment,
    bool? subscribedPremium,
    int? sessionCount,
  }) {
    int newCV = _conversionValue;
    
    // Revenue bands (bits 0-1)
    if (revenue != null) {
      if (revenue > 100) {
        newCV |= 0x03; // Set bits 0-1 to 11
      } else if (revenue > 50) {
        newCV |= 0x02; // Set bits 0-1 to 10
      } else if (revenue > 0) {
        newCV |= 0x01; // Set bits 0-1 to 01
      }
    }
    
    // User actions (bits 2-5)
    if (signedUp == true) newCV |= 0x04;      // Bit 2
    if (madePayment == true) newCV |= 0x08;    // Bit 3
    if (subscribedPremium == true) newCV |= 0x10; // Bit 4
    
    // Session engagement (bit 5)
    if (sessionCount != null && sessionCount > 3) {
      newCV |= 0x20; // Bit 5
    }
    
    // Only update if value increases
    if (newCV > _conversionValue) {
      _conversionValue = newCV;
      _sendToAppsFlyer(newCV);
    }
  }
  
  void _sendToAppsFlyer(int cv) {
    // AppsFlyer handles the actual SKAN update
    print('Updating SKAN CV to: $cv');
  }
}</div>
                    </div>
                </div>

                <div class="info-card">
                    <h3>6Ô∏è‚É£ Privacy-Preserving Signals</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
                        <div>
                            <h4 style="color: #ff6b6b;">‚ùå What SKAN Does NOT Send:</h4>
                            <ul>
                                <li>User ID or Device ID (IDFA)</li>
                                <li>Exact timestamp of install</li>
                                <li>Exact timestamp of conversion</li>
                                <li>IP address</li>
                                <li>Detailed user demographics</li>
                                <li>Exact revenue amounts</li>
                            </ul>
                        </div>
                        <div>
                            <h4 style="color: #51cf66;">‚úÖ What SKAN DOES Send:</h4>
                            <ul>
                                <li>Aggregated conversion value</li>
                                <li>Campaign ID</li>
                                <li>Source app (with threshold)</li>
                                <li>Coarse timing (window-based)</li>
                                <li>Install validation</li>
                                <li>Coarse conversion value (SKAN 4.0)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3>7Ô∏è‚É£ Signal Optimization Strategies</h3>
                    
                    <h4>üõçÔ∏è For E-commerce Apps:</h4>
                    <ul>
                        <li>Focus bits on revenue ranges and purchase frequency</li>
                        <li>Track cart value tiers and checkout completion</li>
                        <li>Monitor product category performance</li>
                        <li>Use AppsFlyer's revenue prediction models</li>
                    </ul>

                    <h4>üéÆ For Gaming Apps:</h4>
                    <ul>
                        <li>Track level progression milestones</li>
                        <li>Monitor in-app purchase tiers</li>
                        <li>Measure retention checkpoints</li>
                        <li>Leverage AppsFlyer's player LTV predictions</li>
                    </ul>

                    <h4>üì± For Subscription Apps:</h4>
                    <ul>
                        <li>Track trial starts and conversions</li>
                        <li>Monitor subscription tier upgrades</li>
                        <li>Measure feature adoption rates</li>
                        <li>Use AppsFlyer's churn prediction models</li>
                    </ul>
                </div>

                <div class="info-card">
                    <h3>8Ô∏è‚É£ Testing Digital Signals in AppsFlyer</h3>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <span class="code-language">iOS Test Configuration</span>
                        </div>
                        <div class="code-content">// SKAdNetwork Test Profile
{
  "SKAdNetworkTestMode": true,
  "TestConversionValues": [0, 15, 31, 63],
  "TestPostbackDelay": 5, // seconds instead of 24-48 hours
  "AppsFlyerTestMode": true,
  "DebugVerbosity": "high"
}</div>
                    </div>

                    <h4>Testing Steps:</h4>
                    <ol>
                        <li>Register test device in AppsFlyer dashboard</li>
                        <li>Enable SKAN debug mode in SDK</li>
                        <li>Use Apple's SKAdNetwork test profile</li>
                        <li>Monitor real-time CV updates in debug console</li>
                        <li>Validate postbacks in AppsFlyer test dashboard</li>
                    </ol>
                </div>

                <div class="info-card">
                    <h3>9Ô∏è‚É£ Signal Limitations & AppsFlyer Workarounds</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
                        <div>
                            <h4 style="color: #ff6b6b;">‚ö†Ô∏è SKAN Limitations:</h4>
                            <ul>
                                <li>Only 64 possible values (6 bits)</li>
                                <li>Can't decrease once set</li>
                                <li>24-48 hour delay in reporting</li>
                                <li>No user-level data</li>
                                <li>Limited attribution windows</li>
                            </ul>
                        </div>
                        <div>
                            <h4 style="color: #51cf66;">üí° AppsFlyer Solutions:</h4>
                            <ul>
                                <li>Predictive modeling for full LTV</li>
                                <li>Statistical models to fill gaps</li>
                                <li>Aggregated cross-campaign reporting</li>
                                <li>Machine learning pattern recognition</li>
                                <li>Single Source of Truth dashboard</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3>üîü AppsFlyer Conversion Studio</h3>
                    <p>Visual tool for optimizing your conversion value schema:</p>
                    
                    <h4>Key Features:</h4>
                    <ul>
                        <li><strong>Visual Schema Builder:</strong> Drag-and-drop interface for CV configuration</li>
                        <li><strong>Revenue Optimizer:</strong> Automatically suggests optimal revenue bands</li>
                        <li><strong>A/B Testing:</strong> Test different schemas across user segments</li>
                        <li><strong>Performance Simulator:</strong> Preview expected results before deployment</li>
                        <li><strong>Smart Recommendations:</strong> AI-powered suggestions based on your app type</li>
                    </ul>

                    <h4>Schema Templates:</h4>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 10px;">
                        <strong>‚Ä¢ E-commerce Template:</strong> Revenue + Cart + Checkout signals<br>
                        <strong>‚Ä¢ Gaming Template:</strong> Level + IAP + Retention signals<br>
                        <strong>‚Ä¢ Subscription Template:</strong> Trial + Tier + Engagement signals<br>
                        <strong>‚Ä¢ Custom Template:</strong> Build your own from scratch
                    </div>
                </div>


                <h2 class="section-title" style="margin-top: 40px;">Technical Requirements & Resources</h2>

                <div class="info-card">
                    <h3>üìã TR1: AppsFlyer Flutter SDK Integration</h3>
                    <p><strong>GitHub:</strong> <a href="https://github.com/AppsFlyerSDK/appsflyer-flutter-plugin" target="_blank" style="color: #667eea; text-decoration: none; font-weight: 600;">AppsFlyerSDK/appsflyer-flutter-plugin</a></p>
                    <p style="margin-top: 10px;">Complete Flutter plugin for SKAN integration, event tracking, and deep linking.</p>
                </div>

                <div class="info-card">
                    <h3>üçé TR2: SKAN Network IDs</h3>
                    <p><strong>GitHub:</strong> <a href="https://github.com/skadnetwork/ad-network-ids" target="_blank" style="color: #667eea; text-decoration: none; font-weight: 600;">skadnetwork/ad-network-ids</a></p>
                    <p style="margin-top: 10px;">Official SKAdNetwork ID registry - required for all supported ad networks.</p>
                </div>

                <div class="info-card">
                    <h3>üîó AppsFlyer SDKs - All Platforms</h3>
                    <p><strong>Main Repository:</strong> <a href="https://github.com/AppsFlyerSDK" target="_blank" style="color: #667eea; text-decoration: none; font-weight: 600;">github.com/AppsFlyerSDK</a></p>
                    <p style="margin-top: 10px;"><strong>Available SDKs:</strong></p>
                    <ul>
                        <li><a href="https://github.com/AppsFlyerSDK/appsflyer-ios-sdk" target="_blank" style="color: #667eea;">iOS SDK</a></li>
                        <li><a href="https://github.com/AppsFlyerSDK/AppsFlyerSDK-Android" target="_blank" style="color: #667eea;">Android SDK</a></li>
                        <li><a href="https://github.com/AppsFlyerSDK/appsflyer-react-native-plugin" target="_blank" style="color: #667eea;">React Native</a></li>
                        <li><a href="https://github.com/AppsFlyerSDK/appsflyer-flutter-plugin" target="_blank" style="color: #667eea;">Flutter</a></li>
                        <li><a href="https://github.com/AppsFlyerSDK/appsflyer-web-sdk" target="_blank" style="color: #667eea;">Web SDK</a></li>
                    </ul>
                </div>

                <div class="info-card">
                    <h3>üß™ TR3 & TR4: Testing & Validation</h3>
                    <p><strong>Documentation:</strong> <a href="https://support.appsflyer.com/hc/en-us/articles/207032066" target="_blank" style="color: #667eea; text-decoration: none; font-weight: 600;">SKAdTest Postback Testing</a></p>
                    <p style="margin-top: 10px;">Complete testing guide for SKAN postback validation, CV testing, and postback verification.</p>
                </div>

                <div class="info-card">
                    <h3>üìö TR5: Developer Documentation</h3>
                    <p style="margin-top: 10px;"><strong>Complete package includes:</strong></p>
                    <ul>
                        <li>Setup guide and initialization</li>
                        <li>API reference documentation</li>
                        <li>Code examples and patterns</li>
                        <li>QA scenarios and checklists</li>
                        <li>Best practices and optimization</li>
                        <li>Troubleshooting guide</li>
                    </ul>
                </div>

                <div class="info-card" style="background: #e8f4f8; border-left: 4px solid #2196F3;">
                    <h3 style="color: #0c5460;">‚úÖ Implementation Checklist</h3>
                    <ul style="margin-top: 15px; color: #0c5460;">
                        <li>‚òê Integrate AppsFlyer Flutter Plugin</li>
                        <li>‚òê Add SKAN Network IDs to Info.plist</li>
                        <li>‚òê Initialize AppsFlyer SDK</li>
                        <li>‚òê Configure CV mapping schema</li>
                        <li>‚òê Implement event tracking</li>
                        <li>‚òê Test with SKAdTest tool</li>
                        <li>‚òê Validate in AppsFlyer dashboard</li>
                        <li>‚òê Deploy to production</li>
                        <li>‚òê Monitor SKAN postbacks</li>
                    </ul>
                </div>

                <div class="info-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <h3>üöÄ AppsFlyer SKAN Advantages</h3>
                    <div style="color: white; font-size: 1.05em;">
                        <div style="margin-bottom: 12px;">‚Ä¢ üìä <strong>Enhanced Analytics:</strong> Go beyond basic SKAN with predictive models</div>
                        <div style="margin-bottom: 12px;">‚Ä¢ üìà <strong>Unified Dashboard:</strong> Single view for all attribution data</div>
                        <div style="margin-bottom: 12px;">‚Ä¢ üîÆ <strong>Predictive Insights:</strong> LTV and churn predictions from limited data</div>
                        <div style="margin-bottom: 12px;">‚Ä¢ üéØ <strong>Smart Optimization:</strong> AI-powered CV schema recommendations</div>
                        <div style="margin-bottom: 12px;">‚Ä¢ üõ°Ô∏è <strong>Privacy Compliant:</strong> Full adherence to Apple's guidelines</div>
                        <div style="margin-bottom: 12px;">‚Ä¢ ‚ö° <strong>Real-time Processing:</strong> Immediate CV updates and monitoring</div>
                        <div style="margin-bottom: 12px;">‚Ä¢ üîß <strong>Easy Integration:</strong> Simple SDK with Flutter support</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Attribution Type Logic
        function updateAttributionType() {
            const environment = document.querySelector('input[name="environment"]:checked').value;
            const consent = document.querySelector('input[name="consent"]:checked').value;
            
            let attributionType = '';
            let accuracy = '';
            let signals = '';
            let bgColor = '';
            
            if (consent === 'present') {
                // WITH CONSENT
                if (environment === 'ios') {
                    attributionType = 'Deterministic Click-Through (IDFA)';
                    accuracy = 'Accuracy: 99%+ | Device-level matching with IDFA';
                    signals = '<strong>üîë Signals:</strong> IDFA + Device Model + OS Version';
                    bgColor = '#d4edda';
                } else if (environment === 'android') {
                    attributionType = 'Deterministic Click-Through (GAID)';
                    accuracy = 'Accuracy: 99%+ | Device-level matching with GAID';
                    signals = '<strong>üîë Signals:</strong> Google Advertising ID + Device Model + OS';
                    bgColor = '#d4edda';
                } else if (environment.includes('mobile')) {
                    attributionType = 'Probabilistic Click-Through (Web)';
                    accuracy = 'Accuracy: 65-80% | First-party cookies + URL parameters';
                    signals = '<strong>üîë Signals:</strong> First-party Cookies + UTM Parameters + User-Agent + IP Range + Browser Fingerprint';
                    bgColor = '#d4edda';
                } else {
                    attributionType = 'Deterministic Click-Through';
                    accuracy = 'Accuracy: 99%+ | Device-level matching with Analytics ID';
                    signals = '<strong>üîë Signals:</strong> Analytics ID + User Agent + Device Fingerprint';
                    bgColor = '#d4edda';
                }
            } else {
                // NO CONSENT
                if (environment === 'ios') {
                    attributionType = 'SKAN (SKAdNetwork) - Privacy-Preserving';
                    accuracy = 'Accuracy: ~60% (Aggregate) | Privacy threshold applies';
                    signals = '<strong>üîë Signals:</strong> 6-bit Conversion Value + Campaign ID (No user data)';
                    bgColor = '#fff3cd';
                } else if (environment.includes('mobile')) {
                    attributionType = 'Probabilistic Attribution (Web)';
                    accuracy = 'Accuracy: 55-70% | Cross-site tracking limited';
                    signals = '<strong>üîë Signals:</strong> IP Range + User-Agent + Browser Type + Timestamp + Device Type (Limited by ITP/ETP)';
                    bgColor = '#e7d4f5';
                } else {
                    attributionType = 'Probabilistic Attribution';
                    accuracy = 'Accuracy: 70-85% | Cohort fingerprint matching';
                    signals = '<strong>üîë Signals:</strong> IP Range (first 3 octets) + User-Agent + OS + Browser + Timestamp + Device Model + Screen Resolution';
                    bgColor = '#e7d4f5';
                }
            }
            
            const displayDiv = document.getElementById('attribution-type-display');
            displayDiv.style.backgroundColor = bgColor;
            document.getElementById('attr-type-value').textContent = attributionType;
            document.getElementById('attr-accuracy').textContent = accuracy;
            
            const signalsDiv = document.getElementById('attr-signals');
            if (signals) {
                signalsDiv.innerHTML = signals;
                signalsDiv.style.display = 'block';
                signalsDiv.style.marginTop = '10px';
                signalsDiv.style.paddingTop = '10px';
                signalsDiv.style.borderTop = '1px solid currentColor';
            }
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            updateAttributionType();
        });


        const MEDIA_PARTNERS = {
            'google_search': { name: 'Google Search', clickWindow: { min: 1, max: 90, default: 30 }, viewWindow: { min: 1, max: 1, default: 1 } },
            'google_dv360': { name: 'Google DV360', clickWindow: { min: 1, max: 30, default: 30 }, viewWindow: { min: 1, max: 7, default: 1 } },
            'amazon_dsp': { name: 'Amazon DSP', clickWindow: { min: 1, max: 7, default: 7 }, viewWindow: { min: 1, max: 1, default: 1 } },
            'amazon_ads': { name: 'Amazon Ads', clickWindow: { min: 1, max: 30, default: 7 }, viewWindow: { min: 1, max: 1, default: 1 } },
            'pinterest': { name: 'Pinterest', clickWindow: { min: 1, max: 30, default: 30 }, viewWindow: { min: 1, max: 7, default: 1 } },
            'reddit': { name: 'Reddit', clickWindow: { min: 7, max: 90, default: 90 }, viewWindow: { min: 1, max: 7, default: 1 } },
            'meta': { name: 'Meta', clickWindow: { min: 1, max: 7, default: 7 }, viewWindow: { min: 1, max: 1, default: 1 } },
            'tiktok': { name: 'TikTok', clickWindow: { min: 1, max: 30, default: 7 }, viewWindow: { min: 1, max: 1, default: 1 } },
            'snapchat': { name: 'Snapchat', clickWindow: { min: 1, max: 28, default: 28 }, viewWindow: { min: 1, max: 1, default: 1 } },
            'direct_buy': { name: 'Direct Buys', clickWindow: { min: 1, max: 60, default: 30 }, viewWindow: { min: 1, max: 1, default: 1 } }
        };

        let partners = [];
        let nextId = 1;

        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const target = this.getAttribute('data-tab');
                document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                document.getElementById(target).classList.add('active');
            });
        });

        window.copyCode = function(id) {
            const text = document.getElementById(id).textContent;
            navigator.clipboard.writeText(text);
            event.target.textContent = '‚úÖ Copied!';
            setTimeout(() => event.target.textContent = 'üìã Copy Code', 2000);
        };

        function createAnimatedBubbles() {
            const container = document.getElementById('bubble-container');
            if (!container) return;
            const colors = ['blue', 'green', 'purple', 'pink', 'cyan'];
            const sizes = ['size-sm', 'size-md', 'size-lg'];
            for (let i = 0; i < 40; i++) {
                const bubble = document.createElement('div');
                bubble.className = `bubble ${colors[Math.floor(Math.random() * colors.length)]} ${sizes[Math.floor(Math.random() * sizes.length)]}`;
                const startX = Math.random() * 100;
                const offsetX = (Math.random() - 0.5) * 80;
                const duration = 3 + Math.random() * 2;
                const delay = i * 0.15;
                bubble.style.left = startX + '%';
                bubble.style.bottom = '-20px';
                bubble.style.animation = `float-up ${duration}s ease-in ${delay}s infinite`;
                bubble.style.setProperty('--tx', offsetX + 'px');
                container.appendChild(bubble);
            }
        }

        function renderPartner(id) {
            const container = document.getElementById('partners-container');
            let existing = container.querySelector(`[data-id="${id}"]`);
            if (existing) existing.remove();
            const partner = partners.find(p => p.id === id);
            const info = MEDIA_PARTNERS[partner.partner];
            const type = partner.type || 'Click-Through';
            const window = partner.window || (type === 'Click-Through' ? info.clickWindow.default : info.viewWindow.default);
            const card = document.createElement('div');
            card.className = 'partner-card';
            card.setAttribute('data-id', id);
            card.innerHTML = `<div class="partner-row">
                <div class="field-group"><label>Partner</label><select class="partner-select" data-id="${id}">${Object.entries(MEDIA_PARTNERS).map(([k, v]) => `<option value="${k}" ${k === partner.partner ? 'selected' : ''}>${v.name}</option>`).join('')}</select></div>
                <div class="field-group"><label>Type</label><select class="type-select" data-id="${id}"><option value="Click-Through" ${type === 'Click-Through' ? 'selected' : ''}>Click</option><option value="View-Through" ${type === 'View-Through' ? 'selected' : ''}>View</option></select></div>
                <div class="field-group"><label>Date</label><input type="date" class="date-input" data-id="${id}" value="${partner.date || ''}"></div>
                <div class="field-group"><label>Time</label><input type="time" class="time-input" data-id="${id}" value="${partner.time || ''}"></div>
                <div class="field-group"><label>Window</label><input type="number" class="window-input" data-id="${id}" min="1" max="90" value="${window}"></div>
                <button class="remove-btn" onclick="removePartner('${id}')">‚ùå</button></div>`;
            container.appendChild(card);
            card.querySelector('.partner-select').addEventListener('change', e => { partners.find(p => p.id === id).partner = e.target.value; });
            card.querySelector('.type-select').addEventListener('change', e => { partners.find(p => p.id === id).type = e.target.value; });
            card.querySelector('.date-input').addEventListener('change', e => { partners.find(p => p.id === id).date = e.target.value; });
            card.querySelector('.time-input').addEventListener('change', e => { partners.find(p => p.id === id).time = e.target.value; });
            card.querySelector('.window-input').addEventListener('change', e => { partners.find(p => p.id === id).window = parseInt(e.target.value); });
        }

        document.getElementById('add-partner-btn').addEventListener('click', () => {
            const id = nextId++;
            const first = Object.keys(MEDIA_PARTNERS)[0];
            partners.push({ id, partner: first, type: 'Click-Through', window: MEDIA_PARTNERS[first].clickWindow.default, date: new Date().toISOString().split('T')[0], time: '10:00' });
            renderPartner(id);
        });

        window.removePartner = (id) => {
            partners = partners.filter(p => p.id !== id);
            const card = document.querySelector(`[data-id="${id}"]`);
            if (card) card.remove();
        };

        document.getElementById('calculate-btn').addEventListener('click', () => {
            const installDate = document.getElementById('install-date').value;
            const installTime = document.getElementById('install-time').value;
            if (!installDate || !installTime || partners.length === 0) { alert('Complete all fields'); return; }
            const installDT = new Date(`${installDate}T${installTime}`);
            const events = [];
            partners.forEach(p => {
                if (p.date && p.time) {
                    const eventDT = new Date(`${p.date}T${p.time}`);
                    const daysDiff = (eventDT - installDT) / (1000 * 60 * 60 * 24);
                    const withinWindow = daysDiff <= 0 && daysDiff >= -p.window;
                    events.push({ id: p.id, partner: MEDIA_PARTNERS[p.partner].name, type: p.type, window: p.window, daysDiff: daysDiff, withinWindow: withinWindow });
                }
            });
            events.sort((a, b) => b.daysDiff - a.daysDiff);
            const clicksInWindow = events.filter(e => e.type === 'Click-Through' && e.withinWindow);
            const viewsInWindow = events.filter(e => e.type === 'View-Through' && e.withinWindow);
            let winner;
            if (clicksInWindow.length > 0) { winner = clicksInWindow[0]; winner.method = 'Last Click'; } 
            else if (viewsInWindow.length > 0) { winner = viewsInWindow[viewsInWindow.length - 1]; winner.method = 'First View'; } 
            else { winner = { partner: 'Organic', method: 'No paid attribution' }; }
            document.getElementById('animation-container').style.display = 'block';
            document.getElementById('install-time-display').textContent = installDT.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
            createAnimatedBubbles();
            const flowDiv = document.getElementById('events-flow');
            flowDiv.innerHTML = '';
            events.forEach((e, idx) => {
                const item = document.createElement('div');
                item.className = 'event-flow';
                item.style.animationDelay = `${idx * 0.2}s`;
                const icon = e.type === 'Click-Through' ? 'üñ±Ô∏è' : 'üëÅÔ∏è';
                const iconClass = e.type === 'Click-Through' ? 'icon-click' : 'icon-view';
                const isWinner = winner.id === e.id ? '<span style="color: #28a745; font-weight: 600;">‚úì WINNER</span>' : '';
                item.innerHTML = `<div class="event-icon ${iconClass}">${icon}</div><div style="flex: 1;"><strong>${e.partner}</strong> <span style="background: #667eea; color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.7em;">${e.type}</span> ${isWinner}<div style="font-size: 0.8em; color: #666; margin-top: 5px;">${e.daysDiff.toFixed(1)} days before</div></div>`;
                flowDiv.appendChild(item);
            });
            const resultsDiv = document.getElementById('results-container');
            resultsDiv.innerHTML = '';
            
            const environment = document.querySelector('input[name="environment"]:checked').value;
            const consent = document.querySelector('input[name="consent"]:checked').value;
            let attributionModel = '';
            
            if (environment === 'ios' && consent === 'present') {
                attributionModel = 'IDFA';
            } else if (environment === 'android' && consent === 'present') {
                attributionModel = 'GAID';
            } else if (environment === 'ios' && consent === 'absent') {
                attributionModel = 'SKAN';
            } else if (environment.includes('mobile')) {
                attributionModel = 'Web Attribution (Cookies/Fingerprint)';
            } else if (consent === 'present') {
                attributionModel = 'Analytics ID';
            } else {
                attributionModel = 'Probabilistic';
            }
            
            const winnerBox = document.createElement('div');
            winnerBox.className = 'winner-box';
            winnerBox.innerHTML = `<div style="font-size: 3em;">üèÜ</div><h3>Winner</h3><div class="winner-partner">${winner.partner}</div><div class="winner-details"><strong>Method:</strong> ${winner.method}<br><strong>Attribution Model:</strong> ${attributionModel}</div>`;
            resultsDiv.appendChild(winnerBox);
        });

        document.getElementById('reset-btn').addEventListener('click', () => {
            partners = [];
            nextId = 1;
            document.getElementById('partners-container').innerHTML = '';
            document.getElementById('results-container').innerHTML = '<div class="no-results"><i class="fas fa-arrow-down" style="font-size: 2em;"></i><p>Add partners and calculate</p></div>';
            document.getElementById('animation-container').style.display = 'none';
        });

        const today = new Date().toISOString().split('T')[0];
        document.getElementById('install-date').value = today;
        document.getElementById('install-time').value = '14:30';
        document.getElementById('add-partner-btn').click();
    </script>
</body>
</html>
